[0m[1mvar.timeweb_project_id[0m
  ID of the Timeweb Cloud project where resources will be created

  [1mEnter a value:[0m [0m
[0m[1mdata.twc_os.os: Reading...[0m[0m
[0m[1mdata.twc_software.softs: Reading...[0m[0m
[0m[1mdata.twc_projects.diplom: Reading...[0m[0m
[0m[1mdata.twc_configurator.premium_ru1: Reading...[0m[0m
[0m[1mdata.twc_projects.diplom: Read complete after 0s [id=2000219][0m
[0m[1mdata.twc_os.os: Read complete after 0s [id=79][0m
[0m[1mdata.twc_software.softs: Read complete after 0s [id=25][0m
[0m[1mdata.twc_configurator.premium_ru1: Read complete after 0s [id=11][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # twc_server.server[0m will be created
[0m  [32m+[0m[0m resource "twc_server" "server" {
      [32m+[0m[0m availability_zone         = (known after apply)
      [32m+[0m[0m avatar_id                 = (known after apply)
      [32m+[0m[0m boot_mode                 = (known after apply)
      [32m+[0m[0m cloud_init                = <<-EOT
            #!/bin/sh
            
            set -e
            
            apt update -y
            apt install nginx-core -y
            apt install nginx-extras -y
            apt install nginx-light -y
            
            mkdir -p /opt/mlops-app
            
            cat > /opt/mlops-app/docker-compose.yml << 'EOF'
            version: '3.8'
            services:
              mlops-app-1:
                image: mlops-app:latest
                volumes: &volumes
                  - /opt/mlops-app/data:/app/data
                environment: &env
                  - PYTHONUNBUFFERED=1
                restart: unless-stopped
                ports:
                  - "8001:8000"
            
              mlops-app-2:
                image: mlops-app:latest
                volumes: *volumes
                environment: *env
                restart: unless-stopped
                ports:
                  - "8002:8000"
            
              mlops-app-3:
                image: mlops-app:latest
                volumes: *volumes
                environment: *env
                restart: unless-stopped
                ports:
                  - "8003:8000"
            EOF
            
            # Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ nginx.conf
            cat > /etc/nginx/nginx.conf << 'EOF'
            events {}
            
            http {
                upstream backend {
                    server 127.0.0.1:8001;
                    server 127.0.0.1:8002;
                    server 127.0.0.1:8003;
                }
            
                server {
                    listen 80;
            
                    location / {
                        proxy_pass http://backend;
                        proxy_set_header Host $host;
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                    }
                }
            }
            EOF
            
            systemctl restart nginx
            
            cd /opt/mlops-app && docker-compose up -d || true
        EOT
      [32m+[0m[0m comment                   = (known after apply)
      [32m+[0m[0m configurator_id           = (known after apply)
      [32m+[0m[0m cpu                       = (known after apply)
      [32m+[0m[0m cpu_frequency             = (known after apply)
      [32m+[0m[0m disks                     = (known after apply)
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m is_ddos_guard             = (known after apply)
      [32m+[0m[0m is_root_password_required = true
      [32m+[0m[0m location                  = (known after apply)
      [32m+[0m[0m main_ipv4                 = (known after apply)
      [32m+[0m[0m name                      = "server"
      [32m+[0m[0m networks                  = (known after apply)
      [32m+[0m[0m os                        = (known after apply)
      [32m+[0m[0m os_id                     = 79
      [32m+[0m[0m preset_id                 = (known after apply)
      [32m+[0m[0m project_id                = 2000219
      [32m+[0m[0m ram                       = (known after apply)
      [32m+[0m[0m root_pass                 = (sensitive value)
      [32m+[0m[0m software                  = (known after apply)
      [32m+[0m[0m software_id               = 25
      [32m+[0m[0m ssh_keys_ids              = (known after apply)
      [32m+[0m[0m start_at                  = (known after apply)
      [32m+[0m[0m status                    = (known after apply)
      [32m+[0m[0m vnc_pass                  = (sensitive value)

      [32m+[0m[0m configuration {
          [32m+[0m[0m configurator_id = 11
          [32m+[0m[0m cpu             = 4
          [32m+[0m[0m disk            = 20480
          [32m+[0m[0m gpu             = 0
          [32m+[0m[0m ram             = 8192
        }
    }

[1m  # twc_server_ip.master_ipv4[0m will be created
[0m  [32m+[0m[0m resource "twc_server_ip" "master_ipv4" {
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m ip               = (known after apply)
      [32m+[0m[0m is_main          = (known after apply)
      [32m+[0m[0m ptr              = (known after apply)
      [32m+[0m[0m source_server_id = (known after apply)
      [32m+[0m[0m type             = "ipv4"
    }

[1m  # twc_ssh_key.diploma_key[0m will be created
[0m  [32m+[0m[0m resource "twc_ssh_key" "diploma_key" {
      [32m+[0m[0m body       = <<-EOT
            ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAICbjDWVDfNMGJTPMQNSNb19dj4cA3mKHGUXETwoVtZOn menar@glida
        EOT
      [32m+[0m[0m created_at = (known after apply)
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m name       = "diploma-key"
      [32m+[0m[0m used_by    = (known after apply)
    }

[1mPlan:[0m [0m3 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  [32m+[0m[0m server_ip = (known after apply)
[0m[1mtwc_ssh_key.diploma_key: Creating...[0m[0m
[0m[1mtwc_ssh_key.diploma_key: Creation complete after 1s [id=526907][0m
[0m[1mtwc_server.server: Creating...[0m[0m
[0m[1mtwc_server.server: Creation complete after 1s [id=6315823][0m
[0m[1mtwc_server_ip.master_ipv4: Creating...[0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [00m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [00m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [00m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [00m40s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [00m50s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [01m00s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [01m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [01m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [01m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [01m40s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [01m50s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [02m00s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [02m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [02m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [02m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [02m40s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [02m50s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [03m00s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [03m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [03m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [03m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [03m40s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [03m50s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [04m00s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [04m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [04m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [04m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [04m40s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [04m50s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [05m00s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [05m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [05m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [05m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [05m40s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [05m50s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [06m00s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [06m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [06m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [06m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [06m40s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [06m50s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [07m00s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [07m10s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [07m20s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Still creating... [07m30s elapsed][0m[0m
[0m[1mtwc_server_ip.master_ipv4: Creation complete after 7m33s [id=6315823-77.232.135.134][0m
[0m[1m[32m
Apply complete! Resources: 3 added, 0 changed, 0 destroyed.[0m
[0m[1m[32m
Outputs:

[0mserver_ip = "77.232.135.134"
